<?xml version="1.0" encoding="UTF-8" ?>
<svg
    width="5in"
    height="7in"
    viewBox="0 0 100 140"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
    <defs>
        <style>
            @font-face {
                font-family: "Cyber Dyne";
                src: url(font/cyberdyne.ttf);
                font-weight: normal;
                font-style: normal;
            }
            @font-face {
                font-family: "Eurostile";
                src: url(font/Eurostile.ttf);
                font-weight: normal;
                font-style: normal;
            }
        </style>
        <style type="text/css">
            <![CDATA[
                .fontTitle {font-family:'Cyber Dyne'}
                .fontBody {font-family:'Eurostile'; font-size:3px}
            ]]>
        </style>
    </defs>

    <!-- </script> -->

    <!-- Black rounded frame -->
    <rect width="100" height="140" rx="5" fill="black" />

    <!-- Colored inner rectangular frame / To be changed according to tokenId -->
    <rect id="frame" x="5" y="5" width="90" height="130" fill="#DB4F54" />

    <!-- Title -->
    <text x="9" y="9" font-size="5" class="fontTitle">Buterin Card</text>

    <!-- Buterin image -->
    <image x="9" y="10" width="82" xlink:href="card-images\Buterin.progr.small.jpg" />

    <!-- Title -->
    <text x="9" y="100" font-size="4" class="fontTitle">Trustless</text>

    <!-- Legend text area -->
    <g id="legend">
        <rect x="9" y="101" width="82" height="29" fill="white" opacity="0.8" />
    </g>

    <script>
        <![CDATA[
            const fidenzaPalette = ["#DB4F54","#D12A2F","#E57D32","#FCBC19","#FCD265","#29A691","#7CA9BF","#315F8C","#F7B1A1","#B8D9CE","#E0D7C5","#543E2E","#1F335D","#3B2B20","#121A33","#261C15"];

            // Parameters unique to each tokenId
            let [frameColorId] = [];

            // Setting the frame color
            const randomColorId = () => Math.floor(Math.random() * fidenzaPalette.length);
            if(frameColorId === undefined) frameColorId = randomColorId();
            document.getElementById("frame").setAttribute("fill", fidenzaPalette[frameColorId]);

            // Set the titles color
            const elements = document.getElementsByClassName("fontTitle");
            if(frameColorId>10){
                for(let i=0; i<document.getElementsByClassName("fontTitle").length; i++){
                    elements[i].setAttribute("fill", "white");
                }
            }

            // Javascript script to wrap text in legend
            const legendText = "Lorem ipsum dolor sit amet, consectetur adipiscing elit.\nNunc accumsan nulla et dui efficitur, nec sagittis orci vestibulum.";
            let y = 105;
            const legendElement = document.getElementById("legend");
            const newLineOfText = function(text){
                const legendElementText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                legendElementText.setAttribute("x", 12);
                legendElementText.setAttribute("y", y);
                legendElementText.setAttribute("font-size", 3);
                legendElementText.setAttribute("dominant-baseline",'mathematical');
                legendElementText.setAttribute("class", "fontBody");
                legendElementText.appendChild(document.createTextNode(text));
                legendElement.appendChild(legendElementText);
                y += 4;
            };
            const lines = legendText.split("\n");
            lines.forEach(line => newLineOfText(line));
        ]]>
    </script>
</svg>
